**Студент:** Бабушкин Александр Михайлович
**ИСУ:** 367845  
**Группа:** P3321  
**Университет:** НИУ ИТМО  
**Факультет:** Программной инженерии и компьютерной техники  
**Курс:** 3-й курс  

# Лабораторная работа: Интерполяция

## Цель работы

Цель данной лабораторной работы — работа с вводом/выводом, потоковой обработкой данных и командной строкой. 
Мы реализуем интерполяцию, включая линейную и интерполяцию полиномом Лагранжа, в соответствии с заданными требованиями.

## Описание программы

Программа позволяет выполнять интерполяцию входных данных, подавая их на стандартный ввод в текстовом формате. 
Входные данные должны быть отсортированы по возрастанию по оси X. 
Программа работает в потоковом режиме, обеспечивая непрерывную обработку данных.

[Реализация](./lab3/src/lab3/core.clj)

### Алгоритмы интерполяции

1. **Линейная интерполяция** — используется для расчета значений между двумя заданными точками, создавая отрезки.
2. **Интерполяция полиномом Лагранжа** — используется для более точного вычисления значений на основе всех введенных точек.

### Аргументы командной строки
```
Использование:
lein run <...>
-s --step —— размер шага интерполяции
-a --algorithm —— алгоритм интерполяции (linear, lagrange, both)
-h --help —— вывод информации о команде
```

### Архитектура программы


```
+---------------------------+
| обработка входного потока |
+---------------------------+
        |
        | поток / список / последовательность точек
        v
+-----------------------+      +------------------------------+
| алгоритм интерполяции |<-----| генератор точек, для которых |
+-----------------------+      | необходимо вычислить         |
        |                      | промежуточные значения       |
        |                      +------------------------------+
        |
        | поток / список / последовательность рассчитанных точек
        v
+------------------------+
| печать выходных данных |
+------------------------+

```


### Потоковый режим интерполяции

Потоковый режим для алгоритмов, работающих с группой точек должен работать следующим образом:

```
o o o o o o . . x x x
  x x x . . o . . x x x
    x x x . . o . . x x x
      x x x . . o . . x x x
        x x x . . o . . x x x
          x x x . . o . . x x x
            x x x . . o o o o o o EOF
```
где:  
* каждая строка — окно данных, на основании которых производится расчёт алгоритма;
* строки сменяются по мере поступления в систему новых данных (старые данные удаляются из окна, новые — добавляются);
* **`o`** — рассчитанные данные, можно видеть:
  * большинство окон используется для расчёта всего одной точки, так как именно в "центре" результат наиболее точен;
  * первое и последнее окно используются для расчёта большого количества точек, так лучших данных для расчёта у нас не будет.
* **`.`** — точки, задействованные в рассчете значения o.
* **`x`** — точки, расчёт которых для "окон" не требуется.

## Примеры
### Команда:
```bash
cat data.csv | lein run -s 1 -a both   
```

### Вывод:
```
Задайте точку P1 в формате: X Y
Задайте точку P2 в формате: X Y
Линейная интерполяция (X от -1,000 до 1,000):
X: -1,00	0,00	1,00
Y: 0,00	0,32	0,64

Задайте точку P3 в формате: X Y
Линейная интерполяция (X от 0,571 до 2,571):
X: 0,57	1,57	2,57
Y: 0,50	-0,14	-0,77

Задайте точку P4 в формате: X Y
Линейная интерполяция (X от 2,142 до 4,142):
X: 2,14	3,14	4,14
Y: -0,50	-0,82	-1,14

Задайте точку P5 в формате: X Y
Линейная интерполяция (X от 3,712 до 5,712):
X: 3,71	4,71	5,71
Y: -1,00	-0,05	0,91

Интерполяция полиномом Лагранжа (X от -1,000 до 5,283):
X: -1,00	0,00	1,00	2,00	3,00	4,00	5,00	6,00
Y: 0,00	0,61	0,28	-0,40	-0,94	-0,91	0,03	2,14

Задайте точку P6 в формате: X Y
Линейная интерполяция (X от 5,283 до 7,283):
X: 5,28	6,28	7,28
Y: 0,50	0,18	-0,14

Интерполяция полиномом Лагранжа (X от 0,571 до 6,854):
X: 0,57	1,57	2,57	3,57	4,57	5,57	6,57	7,57
Y: 0,50	0,06	-0,85	-1,05	-0,30	0,76	0,59	-3,28

Задайте точку P7 в формате: X Y
Линейная интерполяция (X от 6,854 до 8,854):
X: 6,85	7,85	8,85
Y: 0,00	0,32	0,64

Интерполяция полиномом Лагранжа (X от 2,142 до 8,425):
X: 2,14	3,14	4,14	5,14	6,14	7,14	8,14	9,14
Y: -0,50	-1,48	-0,49	0,44	0,45	-0,18	-0,02	3,52

Задайте точку P8 в формате: X Y
Линейная интерполяция (X от 8,425 до 10,425):
X: 8,43	9,43	10,43
Y: 0,50	0,82	1,14

Интерполяция полиномом Лагранжа (X от 3,712 до 9,996):
X: 3,71	4,71	5,71	6,71	7,71	8,71	9,71	10,71
Y: -1,00	0,47	0,36	0,02	0,12	0,69	1,08	0,02

Задайте точку P9 в формате: X Y
Линейная интерполяция (X от 9,996 до 11,996):
X: 10,00	11,00	12,00
Y: 1,00	0,36	-0,27

Интерполяция полиномом Лагранжа (X от 5,283 до 11,568):
X: 5,28	6,28	7,28	8,28	9,28	10,28	11,28	12,28
Y: 0,50	0,03	0,07	0,44	0,86	0,98	0,38	-1,47

Задайте точку P10 в формате: X Y
Линейная интерполяция (X от 11,568 до 13,568):
X: 11,57	12,57	13,57
Y: 0,00	-0,64	-1,27

Интерполяция полиномом Лагранжа (X от 6,854 до 13,139):
X: 6,85	7,85	8,85	9,85	10,85	11,85	12,85	13,85
Y: 0,00	0,15	0,75	1,02	0,61	-0,27	-0,98	-0,35

Задайте точку P11 в формате: X Y
Завершение работы.
```

### Данные:
```csv
-1.000;0.00
0.571;0.50
2.142;-0.50
3.712;-1.00
5.283;0.50
6.854;0.00
8.425;0.50
9.996;1.00
11.568;0.00
13.139;-1.00

```

---

### Команда:
```bash
cat data.txt | lein run --step 1.375 --algorithm linear
```

### Вывод:
```
Задайте точку P1 в формате: X Y
Задайте точку P2 в формате: X Y
Линейная интерполяция (X от 1,111 до 3,861):
X: 1,11	2,49	3,86
Y: 1,00	1,56	2,12

Задайте точку P3 в формате: X Y
Линейная интерполяция (X от 3,571 до 6,321):
X: 3,57	4,95	6,32
Y: 2,00	1,12	0,25

Задайте точку P4 в формате: X Y
Линейная интерполяция (X от 5,142 до 7,892):
X: 5,14	6,52	7,89
Y: 1,00	0,12	-0,75

Задайте точку P5 в формате: X Y
Линейная интерполяция (X от 6,712 до 9,462):
X: 6,71	8,09	9,46
Y: 0,00	1,31	2,63

Задайте точку P6 в формате: X Y
Линейная интерполяция (X от 8,283 до 11,033):
X: 8,28	9,66	11,03
Y: 1,50	1,77	2,03

Задайте точку P7 в формате: X Y
Линейная интерполяция (X от 10,854 до 13,604):
X: 10,85	12,23	13,60
Y: 2,00	1,12	0,25

Задайте точку P8 в формате: X Y
Линейная интерполяция (X от 12,425 до 15,175):
X: 12,43	13,80	15,18
Y: 1,00	1,53	2,07

Задайте точку P9 в формате: X Y
Линейная интерполяция (X от 14,996 до 17,746):
X: 15,00	16,37	17,75
Y: 2,00	2,44	2,87

Задайте точку P10 в формате: X Y
Линейная интерполяция (X от 16,568 до 19,318):
X: 16,57	17,94	19,32
Y: 2,50	2,06	1,62

Задайте точку P11 в формате: X Y
Завершение работы.
```

### Данные:
```txt
1.111;              1.00
3.571;              2.00
5.142;              1.00
6.712;              0.00
8.283;              1.50
10.854;             2.00
12.425;             1.00
14.996;             2.00
16.568;             2.50
18.139;             2.00
exit
```

## Тестирование
Для тестирования были реализованы следующие [unit тесты](lab3/test/lab3/core_test.clj).

## Вывод
В ходе выполнения лабораторной работы была успешно разработана программа для интерполяции, которая соответствует всем установленным требованиям. Основными достижениями являются:

1. **Потоковая обработка данных**: Программа принимает входные данные через стандартный ввод, что обеспечивает возможность обработки данных в реальном времени и поддерживает непрерывность вычислений.

2. **Алгоритмы интерполяции**: Реализованы как линейная интерполяция, так и полином Лагранжа. Оба алгоритма функционируют корректно и могут быть использованы одновременно в зависимости от аргументов, переданных через командную строку.

3. **Динамическое обновление окна данных**: Программа поддерживает возможность динамического обновления данных, что позволяет точно рассчитывать промежуточные значения на основе самых актуальных входных данных. Алгоритмы адаптируются к количеству введенных точек, что делает их гибкими и удобными в использовании.

4. **Вывод результатов**: Рассчитанные значения выводятся в форматах, удобных для чтения, что облегчает анализ результатов интерполяции.

Данная реализация демонстрирует навыки в области потоковой обработки данных, использования алгоритмов интерполяции и взаимодействия с командной строкой. 
Программа может быть применена в будущих проектах, связанных с вычислительной математикой и анализом данных.
